# ๐ ูุธุงู ุงููุตุงุฏูุฉ ุงููุชูุฏู - Sport Zone

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุตุงุฏูุฉ ุดุงูู ูุขูู ูููุงุฏู ุงูุฑูุงุถู Sport Zone ูุน ููุฒุงุช ูุชูุฏูุฉ ุชุดูู:

- โ ุชุณุฌูู ุงูุฏุฎูู ุจุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
- โ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ ูุน ุงูุชุญูู ูู ููุฉ ูููุฉ ุงููุฑูุฑ
- โ ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ OAuth (Google, Facebook)
- โ ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ูุธุงู ุงูุตูุงุญูุงุช (ADMIN, MANAGER, TRAINER, MEMBER)
- โ ุญูุงูุฉ ุงููุณุงุฑุงุช ุญุณุจ ุงูุฏูุฑ
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ ูุน ุฏุนู RTL
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

## ๐ ุงูุจููุฉ ุงูุฃุณุงุณูุฉ

### ูููุงุช ุงูุฃุณุงุณูุฉ

```
sport-zone-project/
โโโ prisma/
โ   โโโ schema.prisma              # ูููุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ุฌุฏุงูู ุงููุตุงุฏูุฉ
โโโ src/
โ   โโโ lib/
โ   โ   โโโ auth.ts               # ุฅุนุฏุงุฏ NextAuth v5
โ   โ   โโโ auth-utils.ts         # ุฏูุงู ูุณุงุนุฏุฉ ูููุตุงุฏูุฉ
โ   โ   โโโ tokens.ts             # ุฅุฏุงุฑุฉ ุงูุชูููุงุช
โ   โ   โโโ email.ts              # ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
โ   โโโ app/
โ   โ   โโโ api/auth/
โ   โ   โ   โโโ [...nextauth]/    # ูุนุงูุฌ NextAuth
โ   โ   โ   โโโ register/         # ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
โ   โ   โ   โโโ forgot-password/  # ุทูุจ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
โ   โ   โ   โโโ reset-password/   # ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
โ   โ   โ   โโโ verify-2fa/       # ุงูุชุญูู ุจุฎุทูุชูู
โ   โ   โโโ (auth)/
โ   โ       โโโ login/            # ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
โ   โ       โโโ register/         # ุตูุญุฉ ุงูุชุณุฌูู
โ   โ       โโโ forgot-password/  # ุตูุญุฉ ูุณูุช ูููุฉ ุงููุฑูุฑ
โ   โ       โโโ reset-password/   # ุตูุญุฉ ุฅุนุงุฏุฉ ุงูุชุนููู
โ   โโโ components/
โ   โ   โโโ auth/
โ   โ   โ   โโโ LoginForm.tsx
โ   โ   โ   โโโ RegisterForm.tsx
โ   โ   โ   โโโ SocialButtons.tsx
โ   โ   โ   โโโ PasswordStrength.tsx
โ   โ   โโโ ui/
โ   โ       โโโ Button.tsx
โ   โ       โโโ Input.tsx
โ   โ       โโโ Alert.tsx
โ   โโโ middleware.ts             # ุญูุงูุฉ ุงููุณุงุฑุงุช
โโโ .env                          # ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### 1. ุชุซุจูุช ุงูููุชุจุงุช

```bash
npm install
```

### 2. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
npm run db:push

# ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)
npm run db:seed
```

### 3. ุชูููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุงูุณุฎ `.env.example` ุฅูู `.env` ููู ุจุชุนุฏูู ุงูููู:

```bash
cp .env.example .env
```

ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ:
```env
NEXTAUTH_SECRET="your-secret-key-here"
AUTH_SECRET="your-secret-key-here"
NEXT_PUBLIC_APP_URL="http://localhost:3000"
```

### 4. ุชุดุบูู ุงููุดุฑูุน

```bash
npm run dev
```

ุงูุขู ููููู ุฒูุงุฑุฉ:
- ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู: http://localhost:3000/login
- ุตูุญุฉ ุงูุชุณุฌูู: http://localhost:3000/register

## ๐ ุงูุญุณุงุจุงุช ุงูุงูุชุฑุงุถูุฉ

ุจุนุฏ ุชุดุบูู `npm run db:seed`ุ ุณูุชู ุฅูุดุงุก ุญุณุงุจ ุงูุฃุฏูู:

- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: admin@sportzone.com
- **ูููุฉ ุงููุฑูุฑ**: admin123
- **ุงูุฏูุฑ**: ADMIN

## ๐ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

### ูุธุงู ุงูุฃุฏูุงุฑ

```typescript
enum Role {
  MEMBER   // ุนุถู ุนุงุฏู - ูุตูู ูุญุฏูุฏ
  TRAINER  // ูุฏุฑุจ - ุฅุฏุงุฑุฉ ุงูุญุถูุฑ
  MANAGER  // ูุฏูุฑ - ุฅุฏุงุฑุฉ ุงูุฃุนุถุงุก ูุงูุจุงูุงุช
  ADMIN    // ูุณุคูู - ูุตูู ูุงูู
}
```

### ุชุณูุณู ุงูุตูุงุญูุงุช

```
ADMIN > MANAGER > TRAINER > MEMBER
```

ูู ุฏูุฑ ููุชูู ุตูุงุญูุงุช ุงูุฃุฏูุงุฑ ุงูุฃูู ููู.

## ๐ ุงูููุฒุงุช ุงูุฃูููุฉ

### 1. ุชุดููุฑ ูููุฉ ุงููุฑูุฑ
- ุงุณุชุฎุฏุงู `bcryptjs` ูุน 12 ุฌููุฉ ุชุดููุฑ
- ุนุฏู ุชุฎุฒูู ูููุงุช ุงููุฑูุฑ ุจูุต ูุงุถุญ

### 2. ุงูุชุญูู ูู ููุฉ ูููุฉ ุงููุฑูุฑ
```typescript
// ุงููุชุทูุจุงุช:
- 8 ุฃุญุฑู ุนูู ุงูุฃูู
- ุญุฑู ูุจูุฑ ูุงุญุฏ
- ุญุฑู ุตุบูุฑ ูุงุญุฏ
- ุฑูู ูุงุญุฏ
- ุฑูุฒ ุฎุงุต ูุงุญุฏ
```

### 3. ุญูุงูุฉ ุงููุณุงุฑุงุช
- Middleware ูุชุญูู ูู ุงูุฌูุณุฉ ุชููุงุฆูุงู
- ุฅุนุงุฏุฉ ุชูุฌูู ูููุณุชุฎุฏููู ุบูุฑ ุงููุตุฑุญ ููู
- ุญูุงูุฉ API routes

### 4. JWT Tokens
- ุชูููุงุช ุขููุฉ ูุน ุงูุชูุงุก ุตูุงุญูุฉ
- ุชุฎุฒูู ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ูู JWT ููุท

### 5. CSRF Protection
- ูุฏูุฌ ูู NextAuth v5
- ุญูุงูุฉ ุถุฏ ูุฌูุงุช Cross-Site Request Forgery

## ๐ง ุฅุนุฏุงุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ููุชุทููุฑ (Ethereal Email)

ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ. ุณูุชู ุงุณุชุฎุฏุงู Ethereal Email ููุงุฎุชุจุงุฑ.

### ููุฅูุชุงุฌ (SMTP ุญูููู)

ุฃุถู ุงูุฅุนุฏุงุฏุงุช ูู `.env`:

```env
EMAIL_SERVER_HOST="smtp.gmail.com"
EMAIL_SERVER_PORT="587"
EMAIL_SERVER_USER="your-email@gmail.com"
EMAIL_SERVER_PASSWORD="your-app-password"
EMAIL_FROM="Sport Zone <noreply@sportzone.com>"
```

## ๐ OAuth Configuration

### Google OAuth

1. ุงูุชูู ุฅูู [Google Cloud Console](https://console.cloud.google.com/)
2. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ
3. ูุนูู Google+ API
4. ุฃูุดุฆ OAuth 2.0 Client ID
5. ุฃุถู `http://localhost:3000/api/auth/callback/google` ูู Redirect URI
6. ุฃุถู ุงูู Client ID ูุงูู Secret ูู `.env`:

```env
GOOGLE_CLIENT_ID="your-client-id"
GOOGLE_CLIENT_SECRET="your-client-secret"
NEXT_PUBLIC_GOOGLE_ENABLED="true"
```

### Facebook OAuth

1. ุงูุชูู ุฅูู [Facebook Developers](https://developers.facebook.com/)
2. ุฃูุดุฆ ุชุทุจูู ุฌุฏูุฏ
3. ุฃุถู Facebook Login product
4. ุฃุถู `http://localhost:3000/api/auth/callback/facebook` ูู Valid OAuth Redirect URI
5. ุฃุถู App ID ูุงูู Secret ูู `.env`:

```env
FACEBOOK_CLIENT_ID="your-app-id"
FACEBOOK_CLIENT_SECRET="your-app-secret"
NEXT_PUBLIC_FACEBOOK_ENABLED="true"
```

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู

```bash
# 1. ุดุบู ุงูุณูุฑูุฑ
npm run dev

# 2. ุงูุชุญ ุงููุชุตูุญ
http://localhost:3000/login

# 3. ุงุณุชุฎุฏู ุญุณุงุจ ุงูุฃุฏูู
admin@sportzone.com / admin123
```

### ุงุฎุชุจุงุฑ ุงูุชุณุฌูู

```bash
# 1. ุงูุชุญ ุตูุญุฉ ุงูุชุณุฌูู
http://localhost:3000/register

# 2. ุฃุฏุฎู ุจูุงูุงุชู
# 3. ุชุญูู ูู ููุฉ ูููุฉ ุงููุฑูุฑ
# 4. ุณุฌู ุงูุญุณุงุจ
```

### ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ

```bash
# 1. ุงูุชุญ ุตูุญุฉ ูุณูุช ูููุฉ ุงููุฑูุฑ
http://localhost:3000/forgot-password

# 2. ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู
# 3. ุชุญูู ูู console ููุญุตูู ุนูู ุงูุฑุงุจุท
# 4. ุงุณุชุฎุฏู ุงูุฑุงุจุท ูุฅุนุงุฏุฉ ุงูุชุนููู
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Session not found"
```bash
# ุงุญุฐู ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฃุนุฏ ุฅูุดุงุกูุง
rm prisma/dev.db
npm run db:push
npm run db:seed
```

### ุฎุทุฃ: "Invalid credentials"
```bash
# ุชุฃูุฏ ูู ุตุญุฉ ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ
# ุงุณุชุฎุฏู ุญุณุงุจ ุงูุฃุฏูู ุงูุงูุชุฑุงุถู ููุงุฎุชุจุงุฑ
```

### ุฎุทุฃ: "Middleware not working"
```bash
# ุชุฃูุฏ ูู ูุฌูุฏ AUTH_SECRET ูู .env
# ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ
```

## ๐ ุงููุซุงุฆู ุงูุฅุถุงููุฉ

### API Routes

#### POST `/api/auth/register`
```typescript
// Request
{
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "email": "ahmed@example.com",
  "password": "SecurePass123!"
}

// Response
{
  "message": "ุชู ุงูุชุณุฌูู ุจูุฌุงุญ",
  "user": {
    "id": "...",
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "email": "ahmed@example.com",
    "role": "MEMBER"
  }
}
```

#### POST `/api/auth/forgot-password`
```typescript
// Request
{
  "email": "user@example.com"
}

// Response
{
  "message": "ุฅุฐุง ูุงู ุงูุจุฑูุฏ ููุฌูุฏุงูุ ุณูุชู ุฅุฑุณุงู ุฑุงุจุท ุฅุนุงุฏุฉ ุงูุชุนููู"
}
```

#### POST `/api/auth/reset-password`
```typescript
// Request
{
  "token": "reset-token-here",
  "password": "NewSecurePass123!"
}

// Response
{
  "message": "ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ"
}
```

## ๐ก๏ธ ุฃูุถู ุงูููุงุฑุณุงุช ุงูุฃูููุฉ

1. **ูุง ุชุดุงุฑู ุงูู SECRET**
   - ุบูุฑ `NEXTAUTH_SECRET` ูู ุงูุฅูุชุงุฌ
   - ุงุณุชุฎุฏู ุชูููุฏ ุนุดูุงุฆู ููู

2. **ุงุณุชุฎุฏู HTTPS ูู ุงูุฅูุชุงุฌ**
   ```env
   NEXTAUTH_URL="https://yourdomain.com"
   ```

3. **ูููุฏ ูุนุฏู ุงูุทูุจุงุช**
   - ุฃุถู rate limiting ุนูู endpoints ุงูุญุณุงุณุฉ

4. **ุฑุงุฌุน ุงูุฃุฐููุงุช ุจุงูุชุธุงู**
   - ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏููู
   - ุงุญุฐู ุงูุญุณุงุจุงุช ุบูุฑ ุงููุดุทุฉ

5. **ูุนูู 2FA ููุญุณุงุจุงุช ุงูุญุณุงุณุฉ**
   - ุฎุงุตุฉ ุญุณุงุจุงุช ADMIN ู MANAGER

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. ุฑุงุฌุน ูุฐุง ุงูููู
2. ุชุญูู ูู console ููุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช `.env`
4. ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ

---

ุชู ุชุทููุฑู ุจูุงุณุทุฉ GitHub Copilot ๐ค
